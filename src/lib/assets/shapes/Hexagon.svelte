<script lang="ts">
  export let opacity: string = "0.9";
  export let fill: string = "#D9D9D9";
  export let height: string | number = "100";
  export let startColor: string | null = null;
  export let endColor: string | null = null;
  let backgroundBefore: string | null = null;
  if (startColor && endColor) {
    backgroundBefore = `linear-gradient(161.25deg, ${startColor} 6.75%,${endColor} 85.54%)`;
  } else {
    backgroundBefore = "rgba(255, 255, 255, 0.4)";
  }
</script>

<div
  class="clipped relative"
  style="--height:{height}px; --fill:{fill}; --opacity: {opacity}; --bg-before: {backgroundBefore};"
>
  <slot />
</div>

<style>
  .clipped::before {
    background: var(--bg-before);
    content: "";
    display: block;
    height: var(--height);
    width: var(--height);
    backdrop-filter: blur(20px);
    clip-path: polygon(
      92.3205% 40%,
      93.7939% 43.1596%,
      94.6962% 46.527%,
      95% 50%,
      94.6962% 53.473%,
      93.7939% 56.8404%,
      92.3205% 60%,
      79.8205% 81.6506%,
      77.8209% 84.5064%,
      75.3558% 86.9715%,
      72.5% 88.9711%,
      69.3404% 90.4445%,
      65.973% 91.3468%,
      62.5% 91.6506%,
      37.5% 91.6506%,
      34.027% 91.3468%,
      30.6596% 90.4445%,
      27.5% 88.9711%,
      24.6442% 86.9715%,
      22.1791% 84.5064%,
      20.1795% 81.6506%,
      7.67949% 60%,
      6.20615% 56.8404%,
      5.30384% 53.473%,
      5% 50%,
      5.30384% 46.527%,
      6.20615% 43.1596%,
      7.67949% 40%,
      20.1795% 18.3494%,
      22.1791% 15.4936%,
      24.6442% 13.0285%,
      27.5% 11.0289%,
      30.6596% 9.55551%,
      34.027% 8.65321%,
      37.5% 8.34936%,
      62.5% 8.34936%,
      65.973% 8.65321%,
      69.3404% 9.55551%,
      72.5% 11.0289%,
      75.3558% 13.0285%,
      77.8209% 15.4936%,
      79.8205% 18.3494%
    );
  }
  .clipped {
    height: var(--height);
    width: var(--height);
    backdrop-filter: blur(20px);
    background-color: rgba(0, 0, 0, 0.1);
    clip-path: polygon(
      92.3205% 40%,
      93.7939% 43.1596%,
      94.6962% 46.527%,
      95% 50%,
      94.6962% 53.473%,
      93.7939% 56.8404%,
      92.3205% 60%,
      79.8205% 81.6506%,
      77.8209% 84.5064%,
      75.3558% 86.9715%,
      72.5% 88.9711%,
      69.3404% 90.4445%,
      65.973% 91.3468%,
      62.5% 91.6506%,
      37.5% 91.6506%,
      34.027% 91.3468%,
      30.6596% 90.4445%,
      27.5% 88.9711%,
      24.6442% 86.9715%,
      22.1791% 84.5064%,
      20.1795% 81.6506%,
      7.67949% 60%,
      6.20615% 56.8404%,
      5.30384% 53.473%,
      5% 50%,
      5.30384% 46.527%,
      6.20615% 43.1596%,
      7.67949% 40%,
      20.1795% 18.3494%,
      22.1791% 15.4936%,
      24.6442% 13.0285%,
      27.5% 11.0289%,
      30.6596% 9.55551%,
      34.027% 8.65321%,
      37.5% 8.34936%,
      62.5% 8.34936%,
      65.973% 8.65321%,
      69.3404% 9.55551%,
      72.5% 11.0289%,
      75.3558% 13.0285%,
      77.8209% 15.4936%,
      79.8205% 18.3494%
    );
  }
</style>
